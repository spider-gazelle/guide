
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://spider-gazelle.net/getting_started/routing/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../sessions/">
      
      
      <link rel="icon" href="../../favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.45">
    
    
      
        <title>Routing - Spider Gazelle</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="red">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#strong-paramaters" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Spider Gazelle" class="md-header__button md-logo" aria-label="Spider Gazelle" data-md-component="logo">
      
  <img src="../../img/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Spider Gazelle
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Routing
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="red"  aria-label="Switch to dark theme"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark theme" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="red"  aria-label="Switch to light theme"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light theme" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/spider-gazelle" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  About

      </a>
    </li>
  

      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="../" class="md-tabs__link">
        
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../configuration/" class="md-tabs__link">
        
  
    
  
  New Project

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../openapi/" class="md-tabs__link">
        
  
    
  
  Self Documentation

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../deployment/" class="md-tabs__link">
        
  
    
  
  Deployment

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../Config/environment/" class="md-tabs__link">
        
  
    
  
  Source Documentation

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Spider Gazelle" class="md-nav__button md-logo" aria-label="Spider Gazelle" data-md-component="logo">
      
  <img src="../../img/logo.png" alt="logo">

    </a>
    Spider Gazelle
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/spider-gazelle" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Routing
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Routing
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#strong-paramaters" class="md-nav__link">
    <span class="md-ellipsis">
      Strong Paramaters
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Strong Paramaters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#verbs" class="md-nav__link">
    <span class="md-ellipsis">
      Verbs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defining-routes" class="md-nav__link">
    <span class="md-ellipsis">
      Defining routes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extracting-paramaters" class="md-nav__link">
    <span class="md-ellipsis">
      Extracting paramaters
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extracting paramaters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#customising-parsing" class="md-nav__link">
    <span class="md-ellipsis">
      Customising parsing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-paramater-parser" class="md-nav__link">
    <span class="md-ellipsis">
      Custom paramater parser
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response-codes" class="md-nav__link">
    <span class="md-ellipsis">
      Response codes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#macro-dsl" class="md-nav__link">
    <span class="md-ellipsis">
      Macro DSL
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#customizing-routes" class="md-nav__link">
    <span class="md-ellipsis">
      Customizing routes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#redirecting-to-other-routes" class="md-nav__link">
    <span class="md-ellipsis">
      Redirecting to other routes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#files-and-other-binary-data" class="md-nav__link">
    <span class="md-ellipsis">
      Files and other binary data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inspecting-routes" class="md-nav__link">
    <span class="md-ellipsis">
      Inspecting routes
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sessions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sessions and Cookies
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../spec/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Writing Specs
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../configuration/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    New Project
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            New Project
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging and instrumetion
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/command_line/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Command line options
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../openapi/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Self Documentation
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Self Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openapi/route/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Routes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openapi/schema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Schema
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openapi/params/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Params
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deployment
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Config/environment/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Source Documentation
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Source Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ActionController/aliases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Aliases
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Action Controller
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            Action Controller
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Error/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Errors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Responders/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Responders
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Support/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Support
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Route
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            Route
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Route/Param/Conversion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Params
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Route/Param/Error/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Param errors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Route/Error/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Route errors
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Session/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Session
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#strong-paramaters" class="md-nav__link">
    <span class="md-ellipsis">
      Strong Paramaters
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Strong Paramaters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#verbs" class="md-nav__link">
    <span class="md-ellipsis">
      Verbs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defining-routes" class="md-nav__link">
    <span class="md-ellipsis">
      Defining routes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extracting-paramaters" class="md-nav__link">
    <span class="md-ellipsis">
      Extracting paramaters
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extracting paramaters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#customising-parsing" class="md-nav__link">
    <span class="md-ellipsis">
      Customising parsing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-paramater-parser" class="md-nav__link">
    <span class="md-ellipsis">
      Custom paramater parser
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response-codes" class="md-nav__link">
    <span class="md-ellipsis">
      Response codes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#macro-dsl" class="md-nav__link">
    <span class="md-ellipsis">
      Macro DSL
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#customizing-routes" class="md-nav__link">
    <span class="md-ellipsis">
      Customizing routes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#redirecting-to-other-routes" class="md-nav__link">
    <span class="md-ellipsis">
      Redirecting to other routes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#files-and-other-binary-data" class="md-nav__link">
    <span class="md-ellipsis">
      Files and other binary data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inspecting-routes" class="md-nav__link">
    <span class="md-ellipsis">
      Inspecting routes
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Routing</h1>

<p>Controllers describe and handle routes. There are three methods for defining routes</p>
<ul>
<li>Strong Paramaters (recommended)</li>
<li>Macro DSL (fine control)</li>
</ul>
<h2 id="strong-paramaters">Strong Paramaters<a class="headerlink" href="#strong-paramaters" title="Permanent link">#</a></h2>
<p>This is the recommended method for routing. It conflates routing with the type casting of paramaters to help ensure program correctness by leveraging the type system.
The paramater type casting also applies to filters and exception handlers, where the use of the current routes paramaters is desired.</p>
<h3 id="verbs">Verbs<a class="headerlink" href="#verbs" title="Permanent link">#</a></h3>
<p>The following verbs are provided</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Comments</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">Application</span>
<span class="w">  </span><span class="n">base</span><span class="w"> </span><span class="s2">&quot;/comments&quot;</span>

<span class="w">  </span><span class="o">@[</span><span class="nd">AC::Route::GET</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span><span class="o">]</span>
<span class="w">  </span><span class="k">def</span><span class="w"> </span><span class="nf">index</span><span class="p">;</span><span class="w"> </span><span class="k">end</span>

<span class="w">  </span><span class="o">@[</span><span class="nd">AC::Route::POST</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span><span class="o">]</span>
<span class="w">  </span><span class="k">def</span><span class="w"> </span><span class="nf">create</span><span class="p">;</span><span class="w"> </span><span class="k">end</span>

<span class="w">  </span><span class="o">@[</span><span class="nd">AC::Route::PUT</span><span class="p">(</span><span class="s2">&quot;/:id&quot;</span><span class="p">)</span><span class="o">]</span>
<span class="w">  </span><span class="k">def</span><span class="w"> </span><span class="nf">replace</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Int64</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">String</span><span class="p">);</span><span class="w"> </span><span class="k">end</span>

<span class="w">  </span><span class="o">@[</span><span class="nd">AC::Route::PATCH</span><span class="p">(</span><span class="s2">&quot;/:id&quot;</span><span class="p">)</span><span class="o">]</span>
<span class="w">  </span><span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Int64</span><span class="p">);</span><span class="w"> </span><span class="k">end</span>

<span class="w">  </span><span class="o">@[</span><span class="nd">AC::Route::DELETE</span><span class="p">(</span><span class="s2">&quot;/:id&quot;</span><span class="p">)</span><span class="o">]</span>
<span class="w">  </span><span class="k">def</span><span class="w"> </span><span class="nf">destroy</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">String</span><span class="p">);</span><span class="w"> </span><span class="k">end</span>

<span class="w">  </span><span class="c1"># optional id param</span>
<span class="w">  </span><span class="o">@[</span><span class="nd">AC::Route::OPTIONS</span><span class="p">(</span><span class="s2">&quot;/?:id&quot;</span><span class="p">)</span><span class="o">]</span>
<span class="w">  </span><span class="k">def</span><span class="w"> </span><span class="nf">options</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Int64</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Nil</span><span class="p">);</span><span class="w"> </span><span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<h3 id="defining-routes">Defining routes<a class="headerlink" href="#defining-routes" title="Permanent link">#</a></h3>
<p>Route paramaters, as opposed to query paramaters, are defined as part of the URL path.</p>
<ul>
<li>you may mark parts of the path with a <code>:</code> to have a param with a matching name in the action</li>
<li>i.e. <code>/users/:some_user_id</code> will result in a param named <code>some_user_id</code></li>
<li><code>/projects/:project_id/tasks/:task_id</code> would have a <code>project_id</code> and <code>task_id</code> param generated</li>
<li>route paramaters take precedence over any query paramaters with matching names</li>
<li>optional paramaters are prefixed with a <code>?</code></li>
<li><code>/users/?:some_user_id/groups</code> allows the path segment <code>some_user_id</code> to be optional</li>
<li>glob path allows multiple segments (i.e. captures a <code>/</code> value as part of the params)</li>
<li><code>/path/*:path_to_file</code> would match <code>/path/my/file/location.cr</code>, setting <code>param["path_to_file"] # =&gt; "my/file/location.cr"</code></li>
</ul>
<p>multiple routes can also be applied to a single function</p>
<div class="highlight"><pre><span></span><code><span class="o">@[</span><span class="nd">AC::Route::GET</span><span class="p">(</span><span class="s2">&quot;/users/:id/groups&quot;</span><span class="p">)</span><span class="o">]</span>
<span class="o">@[</span><span class="nd">AC::Route::GET</span><span class="p">(</span><span class="s2">&quot;/users/groups&quot;</span><span class="p">)</span><span class="o">]</span>
<span class="k">def</span><span class="w"> </span><span class="nf">groups</span><span class="p">(</span><span class="n">user_id</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Int64?</span><span class="p">);</span><span class="w"> </span><span class="k">end</span>
</code></pre></div>
<p>however in the example above you could achieve the same thing with a single route <code>@[AC::Route::GET("/users/?:id/groups")]</code></p>
<h3 id="extracting-paramaters">Extracting paramaters<a class="headerlink" href="#extracting-paramaters" title="Permanent link">#</a></h3>
<p>Paramter extraction occurs accross the route params, <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Identifying_resources_on_the_Web#query">query params</a> and <a href="https://developer.mozilla.org/en-US/docs/Learn/Forms/Sending_and_retrieving_form_data">form data</a></p>
<p>Take the following example:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># This could be an DB ORM etc</span>
<span class="k">class</span><span class="w"> </span><span class="nc">MyModel</span>
<span class="w">  </span><span class="k">include</span><span class="w"> </span><span class="n">JSON</span><span class="o">::</span><span class="n">Serializable</span>
<span class="w">  </span><span class="k">include</span><span class="w"> </span><span class="n">YAML</span><span class="o">::</span><span class="n">Serializable</span>

<span class="w">  </span><span class="bp">getter</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Float64</span>
<span class="w">  </span><span class="bp">getter</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Float64</span>
<span class="k">end</span>

<span class="o">@[</span><span class="nd">AC::Route::PATCH</span><span class="p">(</span><span class="s2">&quot;/:id&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="ss">:model</span><span class="p">)</span><span class="o">]</span>
<span class="k">def</span><span class="w"> </span><span class="nf">replace</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Int64</span><span class="p">,</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">MyModel</span><span class="p">,</span><span class="w"> </span><span class="n">merge_arrays</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Bool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">);</span><span class="w"> </span><span class="k">end</span>
</code></pre></div>
<ul>
<li>the <code>id</code> is extracted from the route (the function paramater names are matched)</li>
<li><code>merge_arrays</code> is extracted from the query params and set to false if not provided</li>
<li>the <code>model</code> being patched is extracted from the body and serialised according to the <code>Content-Type</code> header and matching parser</li>
</ul>
<h4 id="customising-parsing">Customising parsing<a class="headerlink" href="#customising-parsing" title="Permanent link">#</a></h4>
<p>Parsers can be customised to parse types in various different ways</p>
<div class="highlight"><pre><span></span><code><span class="o">@[</span><span class="nd">AC::Route::GET</span><span class="p">(</span><span class="s2">&quot;/:id&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">config</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="ss">time</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="ss">format</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;%F %:z&quot;</span><span class="p">},</span>
<span class="w">  </span><span class="ss">degrees</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="ss">strict</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">},</span>
<span class="w">  </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="ss">base</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="ss">underscore</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="ss">strict</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">}</span>
<span class="p">})</span><span class="o">]</span>
<span class="k">def</span><span class="w"> </span><span class="nf">replace</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Int64</span><span class="p">,</span><span class="w"> </span><span class="n">degrees</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Float64</span><span class="p">,</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Time</span><span class="p">);</span><span class="w"> </span><span class="k">end</span>
</code></pre></div>
<p>There are built in parsers for the following types</p>
<ul>
<li><a href="https://crystal-lang.org/api/latest/Number.html#direct-known-subclasses">Number</a> types</li>
<li><a href="https://crystal-lang.org/api/latest/String.html">String</a></li>
<li><a href="https://crystal-lang.org/api/latest/Char.html">Char</a></li>
<li><a href="https://crystal-lang.org/api/latest/Bool.html">Bool</a></li>
<li><a href="https://crystal-lang.org/api/latest/Time.html">Time</a></li>
<li><a href="https://crystal-lang.org/api/latest/Enum.html">Enum</a></li>
<li><a href="https://crystal-lang.org/api/latest/UUID.html">UUID</a></li>
</ul>
<p>You can find the <a href="https://github.com/spider-gazelle/action-controller/blob/master/src/action-controller/router/route_params.cr">custom options here</a></p>
<h4 id="custom-paramater-parser">Custom paramater parser<a class="headerlink" href="#custom-paramater-parser" title="Permanent link">#</a></h4>
<p>You can implement your own type parsers, they can be any class that implements <code>def convert(raw : String)</code>. Initiailizer arguments are the possible customisations.</p>
<div class="highlight"><pre><span></span><code><span class="bp">record</span><span class="w"> </span><span class="n">Commit</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">String</span>

<span class="k">struct</span><span class="w"> </span><span class="o">::</span><span class="n">ActionController</span><span class="o">::</span><span class="n">Route</span><span class="o">::</span><span class="n">Param</span><span class="o">::</span><span class="n">ConvertCommit</span>
<span class="w">  </span><span class="c1"># i.e. `&quot;master#742887&quot;`</span>
<span class="w">  </span><span class="k">def</span><span class="w"> </span><span class="nf">convert</span><span class="p">(</span><span class="n">raw</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">String</span><span class="p">)</span>
<span class="w">    </span><span class="n">branch</span><span class="p">,</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">raw</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sc">&#39;#&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="n">Commit</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">branch</span><span class="p">,</span><span class="w"> </span><span class="n">commit</span><span class="p">)</span>
<span class="w">  </span><span class="k">end</span>
<span class="k">end</span>

<span class="o">@[</span><span class="nd">AC::Route::GET</span><span class="p">(</span><span class="s2">&quot;/:commit&quot;</span><span class="p">)</span><span class="o">]</span>
<span class="k">def</span><span class="w"> </span><span class="nf">replace</span><span class="p">(</span><span class="n">commit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Commit</span><span class="p">);</span><span class="w"> </span><span class="k">end</span>
</code></pre></div>
<p>any converter scoped to <code>ActionController::Route::Param</code> and class name starting with <code>Convert</code> will automatically be converted. If you would like to be more explicit:</p>
<div class="highlight"><pre><span></span><code><span class="bp">record</span><span class="w"> </span><span class="n">Commit</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">String</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">ConvertCommit</span>
<span class="w">  </span><span class="c1"># i.e. `&quot;master#742887&quot;`</span>
<span class="w">  </span><span class="k">def</span><span class="w"> </span><span class="nf">convert</span><span class="p">(</span><span class="n">raw</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">String</span><span class="p">)</span>
<span class="w">    </span><span class="n">branch</span><span class="p">,</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">raw</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sc">&#39;#&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="n">Commit</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">branch</span><span class="p">,</span><span class="w"> </span><span class="n">commit</span><span class="p">)</span>
<span class="w">  </span><span class="k">end</span>
<span class="k">end</span>

<span class="o">@[</span><span class="nd">AC::Route::GET</span><span class="p">(</span><span class="s2">&quot;/:commit&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">converters</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="ss">commit</span><span class="p">:</span><span class="w"> </span><span class="n">ConvertCommit</span>
<span class="p">})</span><span class="o">]</span>
<span class="k">def</span><span class="w"> </span><span class="nf">replace</span><span class="p">(</span><span class="n">commit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Commit</span><span class="p">);</span><span class="w"> </span><span class="k">end</span>
</code></pre></div>
<h3 id="response-codes">Response codes<a class="headerlink" href="#response-codes" title="Permanent link">#</a></h3>
<p>By default all responses will return 200 OK. The default can be changed and response codes can be mapped to return types</p>
<div class="highlight"><pre><span></span><code><span class="c1"># change the default response code</span>
<span class="o">@[</span><span class="nd">AC::Route::GET</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">status_code</span><span class="p">:</span><span class="w"> </span><span class="n">HTTP</span><span class="o">::</span><span class="n">Status</span><span class="o">::</span><span class="no">ACCEPTED</span><span class="p">)</span><span class="o">]</span>
<span class="k">def</span><span class="w"> </span><span class="nf">replace</span><span class="p">(</span><span class="n">commit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Commit</span><span class="p">)</span>
<span class="k">end</span>

<span class="c1"># map response codes to return types</span>
<span class="o">@[</span><span class="nd">AC::Route::GET</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">Int32</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">HTTP</span><span class="o">::</span><span class="n">Status</span><span class="o">::</span><span class="no">OK</span><span class="p">,</span>
<span class="w">  </span><span class="n">String</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">HTTP</span><span class="o">::</span><span class="n">Status</span><span class="o">::</span><span class="no">ACCEPTED</span><span class="p">,</span>
<span class="w">  </span><span class="n">Float64</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">HTTP</span><span class="o">::</span><span class="n">Status</span><span class="o">::</span><span class="no">CREATED</span>
<span class="p">})</span><span class="o">]</span>
<span class="k">def</span><span class="w"> </span><span class="nf">replace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Int32</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Float64</span>
<span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="nb">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="w">  </span><span class="k">when</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="mi">1</span>
<span class="w">  </span><span class="k">when</span><span class="w"> </span><span class="mi">2</span>
<span class="w">    </span><span class="mf">0.5</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span><span class="s2">&quot;wasn&#39;t 1 or 2&quot;</span>
<span class="w">  </span><span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<h2 id="macro-dsl">Macro DSL<a class="headerlink" href="#macro-dsl" title="Permanent link">#</a></h2>
<p>The macro DSL is the basis for all routing in spider-gazelle. This is as close to the metal as you can get.</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">MyPhotos</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">Application</span>
<span class="w">  </span><span class="c1"># ...</span>

<span class="w">  </span><span class="c1"># GET /my_photos/:id/features</span>
<span class="w">  </span><span class="n">get</span><span class="w"> </span><span class="s2">&quot;/:id/features&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">:features</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span><span class="c1"># e.g. render a list of features detected on the photo</span>
<span class="w">    </span><span class="n">features</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[]</span>
<span class="w">    </span><span class="n">render</span><span class="w"> </span><span class="ss">json</span><span class="p">:</span><span class="w"> </span><span class="n">features</span>
<span class="w">  </span><span class="k">end</span>

<span class="w">  </span><span class="c1"># POST /my_photos/:id/feature</span>
<span class="w">  </span><span class="n">post</span><span class="w"> </span><span class="s2">&quot;/my_photos/:id/feature&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">:feature</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span><span class="c1"># add a feature to the photo</span>
<span class="w">    </span><span class="n">head</span><span class="w"> </span><span class="ss">:ok</span>
<span class="w">  </span><span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<p>In the example above we have created a new route with the name <code>features</code> defined by the <code>:features</code> symbol.
This creates a function called <code>features</code> in the class <code>MyPhotos</code> class that can be used with filters.</p>
<h2 id="customizing-routes">Customizing routes<a class="headerlink" href="#customizing-routes" title="Permanent link">#</a></h2>
<p>You might want to define a route that isn't defined by the class name of the controller.
This is also required if you would like to define a root route.</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Welcome</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">Application</span>
<span class="w">  </span><span class="n">base</span><span class="w"> </span><span class="s2">&quot;/&quot;</span>

<span class="w">  </span><span class="o">@[</span><span class="nd">AC::Route::GET</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span><span class="o">]</span>
<span class="w">  </span><span class="k">def</span><span class="w"> </span><span class="nf">index</span><span class="p">;</span><span class="w"> </span><span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<p>Or to define a complex route</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Features</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">Application</span>
<span class="w">  </span><span class="n">base</span><span class="w"> </span><span class="s2">&quot;/my_photos/:photo_id/features&quot;</span>

<span class="w">  </span><span class="c1"># GET /my_photos/:photo_id/features/</span>
<span class="w">  </span><span class="o">@[</span><span class="nd">AC::Route::GET</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span><span class="o">]</span>
<span class="w">  </span><span class="k">def</span><span class="w"> </span><span class="nf">index</span><span class="p">;</span><span class="w"> </span><span class="k">end</span>

<span class="w">  </span><span class="c1"># GET /my_photos/:photo_id/features/:id</span>
<span class="w">  </span><span class="o">@[</span><span class="nd">AC::Route::GET</span><span class="p">(</span><span class="s2">&quot;/:id&quot;</span><span class="p">)</span><span class="o">]</span>
<span class="w">  </span><span class="k">def</span><span class="w"> </span><span class="nf">show</span><span class="p">;</span><span class="w"> </span><span class="k">end</span>

<span class="w">  </span><span class="c1"># POST /my_photos/:photo_id/features/</span>
<span class="w">  </span><span class="o">@[</span><span class="nd">AC::Route::POST</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span><span class="o">]</span>
<span class="w">  </span><span class="k">def</span><span class="w"> </span><span class="nf">create</span><span class="p">;</span><span class="w"> </span><span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<h2 id="redirecting-to-other-routes">Redirecting to other routes<a class="headerlink" href="#redirecting-to-other-routes" title="Permanent link">#</a></h2>
<p>Routes are available as class level functions on the controllers.
Consider the <code>Features</code> class above.</p>
<div class="highlight"><pre><span></span><code><span class="n">Features</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s2">&quot;photo_id&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;feature_id&quot;</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;/my_photos/photo_id/features/feature_id&quot; : String</span>
</code></pre></div>
<p>This can be combined with the redirect helper</p>
<div class="highlight"><pre><span></span><code><span class="n">redirect_to</span><span class="w"> </span><span class="n">Features</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s2">&quot;photo_id&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;feature_id&quot;</span><span class="p">)</span>
</code></pre></div>
<h2 id="files-and-other-binary-data">Files and other binary data<a class="headerlink" href="#files-and-other-binary-data" title="Permanent link">#</a></h2>
<p>The recommendation is to manually manage the response so it can be properly piped.
Here are two seperate examples:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># example of directly writing data, no streaming</span>
<span class="o">@[</span><span class="nd">AC::Route::GET</span><span class="p">(</span><span class="s2">&quot;/qr_code.png&quot;</span><span class="p">)</span><span class="o">]</span>
<span class="k">def</span><span class="w"> </span><span class="nf">png_qr</span><span class="p">(</span>
<span class="w">  </span><span class="o">@[</span><span class="nd">AC::Param::Info</span><span class="p">(</span><span class="ss">description</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the data in the QR code&quot;</span><span class="p">)</span><span class="o">]</span>
<span class="w">  </span><span class="n">content</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">String</span>
<span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Nil</span>
<span class="w">  </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">256</span><span class="w"> </span><span class="c1"># px</span>
<span class="w">  </span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">[</span><span class="s2">&quot;Content-Disposition&quot;</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;inline&quot;</span>
<span class="w">  </span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">[</span><span class="s2">&quot;Content-Type&quot;</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;image/png&quot;</span>
<span class="w">  </span><span class="vi">@__render_called__</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>

<span class="w">  </span><span class="n">png_bytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">QRCode</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">content</span><span class="p">)</span><span class="o">.</span><span class="n">as_png</span><span class="p">(</span><span class="ss">size</span><span class="p">:</span><span class="w"> </span><span class="n">size</span><span class="p">)</span>
<span class="w">  </span><span class="n">response</span><span class="o">.</span><span class="n">write</span><span class="w"> </span><span class="n">png_bytes</span>
<span class="k">end</span>
</code></pre></div>
<p>example of streaming data from the filesystem:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># example of streaming a file, ensuring low memory usage</span>
<span class="o">@[</span><span class="nd">AC::Route::GET</span><span class="p">(</span><span class="s2">&quot;/openapi.yaml&quot;</span><span class="p">)</span><span class="o">]</span>
<span class="k">def</span><span class="w"> </span><span class="nf">openapi</span>
<span class="w">  </span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">[</span><span class="s2">&quot;Content-Disposition&quot;</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sx">%(attachment; filename=&quot;openapi.yml&quot;)</span>
<span class="w">  </span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">[</span><span class="s2">&quot;Content-Type&quot;</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;application/yaml&quot;</span>
<span class="w">  </span><span class="vi">@__render_called__</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>

<span class="w">  </span><span class="n">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;/app/openapi.yml&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="o">|</span><span class="n">file</span><span class="o">|</span>
<span class="w">    </span><span class="n">IO</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p">)</span>
<span class="w">  </span><span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<h2 id="inspecting-routes">Inspecting routes<a class="headerlink" href="#inspecting-routes" title="Permanent link">#</a></h2>
<p>To get a complete list of the available routes in your application
execute the <code>./app --routes</code> command in your terminal.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/spider-gazelle" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>